{%extends 'play/block_content.html'%}
{%block content%}

      <div class="content">
          <div class="col 12">
              <!-- SIDEBAR -->  
              <div class="side_nav z-depth-3 ">
                  <div class="user_info">
                      <div class="col s3">
                          {%load static%}
                          <img class="responsive-img circle" id="cu_img" src="{%static 'play/img/default_user_image.jpg' %}" alt="Default Image">
                          <p id="current_user">   {{current_user.first_name}} {{current_user.last_name}}
                          </p>
                          {%if current_user%}
                          <a class="waves-effect waves-light btn modal-trigger" href="#modal1">Create Team</a>
                          <a class="waves-effect waves-light btn modal-trigger" href="#modal2">Create Game</a>
                          <br>
                          <a class="waves-effect waves-light btn modal-trigger" href="#modal3">Chat</a>
                          <br>
                          <a class="waves-effect waves-light btn" href="/logout">Logout</a>
                          {%endif%}
                      </div>
                  </div>
              </div>
              <!-- MODAL 1 -->
                <div id="modal1" class="modal modal-fixed-footer">
                    <div class="modal-content">
                        <h4>Create A New Team</h4>
                        <form class="" action="/add_team" method="post">
                            {% csrf_token %}
                            <div class="row">
                                <div class="input-field col s12">
                                    <input type="text" name="title" placeholder="Team Name">
                                </div>
                            </div>
                            <div class="input-field col s12">
                                <select class="scrollable" name="sport">
                                    <option value="" disabled selected>Choose your Sport</option>
                                    {%for sport in sports%}
                                    <option value="{{sport.id}}">{{sport.name}}</option>
                                    {%endfor%}
                                </select>
                                <label>Select Sport</label>
                            </div>
                            <div class="input-field col s12">
                                <select multiple>
                                    <option disabled selected>Choose your Teammates</option>
                                    {%for user in users%}
                                        <option value="{{user.id}}">{{user.first_name}} {{user.last_name}}</option>
                                    {%endfor%}
                                </select>
                                <label>Select Teammates</label>
                            </div>
                            <div class="modal-footer">
                                <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Cancel</a>
                                <a class="modal-action modal-close waves-effect waves-green btn-flat"><input type="submit" value="Create"></a>
                            </div>
                        </form>
                    </div>
                </div>
              <!-- END MODAL 1 -->
              <!-- MODAL 2 -->
                <div id="modal2" class="modal modal-fixed-footer">
                    <div class="modal-content">
                        <h4>Create A New Game</h4>
                        <form id="add_event" class="col s12" action="/add_event" method="post">
                            {% csrf_token %}
                            <div class="row">
                                <div class="input-field col s6">
                                    <input name="name" placeholder="Game Title" id="name" type="text" class="validate">
                                </div>
                                <div class="input-field col s3">
                                    <input name="date" id="datetime" type="text" class="validate datepicker" placeholder="Date">
                                </div>
                                <div class="input-field col s3">
                                    <input name="time" id="datetime" type="text" class="validate timepicker" placeholder="Time">
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-field col s4">
                                    <select name="sport">
                                        <option value="" disabled selected>Choose Sport</option>
                                        {%for sport in sports%}
                                        <option value="{{sport.id}}">{{sport.name}}</option>
                                        {%endfor%}
                                    </select>
                                </div>
                            <!-- </div> -->
                            <!-- <div class="row"> -->
                                <div class="input-field col s4">
                                    <select multiple name="teams">
                                        <option value="" disabled selected>Choose Teams(If applicable)</option>
                                        {%for team in teams%}
                                        <option value="{{team.id}}">{{team.title}}</option>
                                        {%endfor%}
                                    </select>
                                </div>
                                <div class="input-field col s4">
                                    <select id="players" multiple name="players">
                                        <option value="" disabled selected>Choose Players(If applicable)</option>
                                        {%for user in users%}
                                        <option value="{{user.id}}">{{user.first_name}}</option>
                                        {%endfor%}
                                    </select>
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-field col s12">
                                    <input id="search_term" type="text" name="location" placeholder="Location">
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-field col s12">
                                    <textarea id="textarea1" name="description" class="materialize-textarea"></textarea>
                                    <label for="description">Description</label>
                                </div>
                            </div>

                            </div>
                            <div class="modal-footer">
                                <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Cancel</a>
                                <input class="modal-action modal-close waves-effect waves-green btn-flat " type="submit" value="Submit">
                            </div>
                        </form>
                </div>
              <!-- END MODAL 2 -->
              <!-- MODAL 3 -->
                <div id="modal3" class="modal">
                    <div class="modal-content">
                        <h4>Modal Header</h4>
                        <p>A bunch of text</p>
                    </div>
                    <div class="modal-footer">
                        <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Agree</a>
                    </div>
                </div>
              <!-- END MODAL 3 -->
              <!-- EVENTS -->
              <div class="events">
                  {%for event in events%}
                  <div class="event z-depth-1">
                      <h5>{{event.name}}</h5>
                      <h4>{{event.sport.name}}</h4>
                      <h5>{{event.location}}
                      </h5>
                      <h5>Hosted by {{event.user.first_name}}</h5>
                      <h6>{{event.description}}</h6>
                      <h6>{{event.date}}</h6>
                      <h6>@ {{event.time}}</h6>
                      <h5>Other Players</h5>
                      {%for user in event.users.all%}
                      <h6>{{user.first_name}}</h6>
                      {%endfor%}
                  </div>
                  {%endfor%}
              </div>
              <div class="teams_and_user_sports">
                  <!-- LEADERBOARD -->
                  <div class="leaderboard z-depth-4">
                      <div class="leaderboard_title">
                          <h5>Leaderboard</h5>
                            <ul class="collection">
                                {%for user in users%}
                                <li class="collection-item">{{user.first_name}} {{user.last_name}}</li>
                                {%endfor%}
                            </ul>
                      </div>
                  </div>
                  <!-- TEAMS -->
                  <div class="teams z-depth-4">
                      <h5>My Teams</h5>
                      <div class="team_list">
                          <ul class="collection">
                              {%if teams|length == 0%}
                              <li class="collection-item">No Teams</li>
                              {%else%}
                                {%for team in teams%}
                                    <li class="collection-item">{{team.title}}</li>
                                {%endfor%}
                              {%endif%}
                          </ul>
                      </div>
                  </div>
              </div>
          </div>
      </div>
      <script type="text/javascript">
          function activatePlacesSearch() {
              let input = document.getElementById('search_term');
              let autocomplete = new google.maps.places.Autocomplete(input);
          }
      </script>
      <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDv2asEHOwHeEb1a5I5mqmljY8cLc8bJwc&libraries=places&callback=activatePlacesSearch"></script>

{%endblock%}
